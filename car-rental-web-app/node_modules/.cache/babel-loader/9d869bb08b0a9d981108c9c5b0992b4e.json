{"ast":null,"code":"var _jsxFileName = \"/Users/huangzhongkai/Desktop/ntu msis/Semester 2/Blockchain System Software Engineering/Topic 6 Decentrailized App/Group Project/bc_project/car-rental-web-app/src/search_car/index.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from \"react\";\nimport { useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\nimport CarEntryCard from \"./car_entrycard\";\nimport \"./index.css\";\nimport SmartContractContext from \"../stores/smartContractContext\";\nimport { message, Button, Modal } from \"antd\";\nimport Rent_form from './car_add_modal/rent_form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ProfList() {\n  _s();\n\n  const {\n    CarRentalContract\n  } = useContext(SmartContractContext);\n  let userType = localStorage.getItem(\"userType\");\n\n  const createBroker = async values => {\n    try {\n      const accounts = await window.ethereum.enable();\n      await CarRentalContract.methods.addCarInfo(values.socialId, values.address, values.name).send({\n        from: accounts[0]\n      });\n      message.success(\"Registered as Broker successfully\");\n    } catch (err) {\n      debugger;\n      message.error(\"Error registering as Broker\");\n    }\n  };\n\n  let history = useHistory();\n  const [carList, setCarList] = useState([{\n    id: 1,\n    carBrand: \"Kia\",\n    carType: \"1\",\n    image: \"img1\",\n    plateNumber: \"SLB1231\",\n    Deposit: \"S$10\",\n    Rental: \"2S$\",\n    Availability: 0,\n    Description: \"Mass-Market Cars\"\n  }, {\n    id: 2,\n    carBrand: \"Chang AN X7\",\n    carType: \"2\",\n    image: \"img2\",\n    plateNumber: \"SLB121\",\n    Deposit: \"S$5\",\n    Rental: \"3S$\",\n    Availability: 1,\n    Description: \"Mass-Market Cars\"\n  }, {\n    id: 3,\n    carBrand: \"Tesla\",\n    carType: \"3\",\n    image: \"img3\",\n    plateNumber: \"SZB1431\",\n    Deposit: \"S$6\",\n    Rental: \"4S$\",\n    Availability: 0,\n    Description: \"Luxury Electric Vehicles\"\n  }, {\n    id: 4,\n    carBrand: \"Suzuki--x\",\n    carType: \"4\",\n    image: \"img4\",\n    plateNumber: \"SDB3431\",\n    Deposit: \"S$4\",\n    Rental: \"6S$\",\n    Availability: 1,\n    Description: \"Mass-Market Cars\"\n  }, {\n    id: 5,\n    carBrand: \"Suzuki xx\",\n    carType: \"4\",\n    image: \"img5\",\n    plateNumber: \"SXB4431\",\n    Deposit: \"S$10\",\n    Rental: \"1S$\",\n    Availability: 0,\n    Description: \"Mass-Market Cars\"\n  }, {\n    id: 6,\n    carBrand: \"Hyundai\",\n    carType: \"4\",\n    image: \"img6\",\n    plateNumber: \"SXB4431\",\n    Deposit: \"S$10\",\n    Rental: \"1S$\",\n    Availability: 1,\n    Description: \"Small Cars\"\n  }]);\n\n  const logOut = () => {\n    localStorage.setItem(\"Token\", \"\");\n    localStorage.setItem(\"username\", \"\");\n    window.dispatchEvent(new Event(\"storage\"));\n    history.push(\"/\");\n  };\n\n  const [visible, setVisible] = useState(false);\n  const [confirmLoading, setConfirmLoading] = useState(false);\n\n  const showModal = () => {\n    setVisible(true);\n  };\n\n  const handleOk = () => {\n    setConfirmLoading(true);\n    setTimeout(() => {\n      setVisible(false);\n      setConfirmLoading(false);\n    }, 2000);\n  };\n\n  const handleCancel = () => {\n    console.log('Clicked cancel button');\n    setVisible(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"searchCar\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"professorNav\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"logOut\",\n        onClick: logOut,\n        children: \"Log out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"returnDashboard\",\n        onClick: () => history.push(\"/dashboard\"),\n        children: \"Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), userType == \"admin\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        style: {\n          display: \"block\",\n          margin: \"20px auto 0 auto\"\n        },\n        onClick: showModal,\n        children: \"Add New Car\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        title: \"Add A New Car\",\n        visible: visible,\n        onOk: handleOk,\n        confirmLoading: confirmLoading,\n        onCancel: handleCancel,\n        children: /*#__PURE__*/_jsxDEV(Rent_form // {...props.location.state} setForm={(form)=>{Form=form}}\n        //                setAddress={(addr)=>{wallet_address=addr}}\n        //                setDate = {(date)=>{from_to_end=date}}               \n        , {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"carList\",\n      children: carList.map(car => {\n        return /*#__PURE__*/_jsxDEV(CarEntryCard, { ...car\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 18\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProfList, \"RT5rPs19VI+Qjydw1drop+aG4g8=\", false, function () {\n  return [useHistory];\n});\n\n_c = ProfList;\nexport default ProfList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfList\");","map":{"version":3,"sources":["/Users/huangzhongkai/Desktop/ntu msis/Semester 2/Blockchain System Software Engineering/Topic 6 Decentrailized App/Group Project/bc_project/car-rental-web-app/src/search_car/index.js"],"names":["useState","useContext","useEffect","useHistory","CarEntryCard","SmartContractContext","message","Button","Modal","Rent_form","ProfList","CarRentalContract","userType","localStorage","getItem","createBroker","values","accounts","window","ethereum","enable","methods","addCarInfo","socialId","address","name","send","from","success","err","error","history","carList","setCarList","id","carBrand","carType","image","plateNumber","Deposit","Rental","Availability","Description","logOut","setItem","dispatchEvent","Event","push","visible","setVisible","confirmLoading","setConfirmLoading","showModal","handleOk","setTimeout","handleCancel","console","log","display","margin","map","car"],"mappings":"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","sourcesContent":["import { useState, useContext } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport CarEntryCard from \"./car_entrycard\";\r\nimport \"./index.css\";\r\nimport SmartContractContext from \"../stores/smartContractContext\";\r\nimport { message, Button, Modal } from \"antd\";\r\nimport Rent_form from './car_add_modal/rent_form';\r\n\r\nfunction ProfList() {\r\n  const { CarRentalContract } = useContext(SmartContractContext);\r\n  let userType = localStorage.getItem(\"userType\");\r\n  const createBroker = async (values) => {\r\n    try {\r\n      const accounts = await window.ethereum.enable();\r\n\r\n      await CarRentalContract.methods\r\n        .addCarInfo(values.socialId, values.address, values.name)\r\n        .send({ from: accounts[0] });\r\n      message.success(\"Registered as Broker successfully\");\r\n    } catch (err) {\r\n      debugger;\r\n      message.error(\"Error registering as Broker\");\r\n    }\r\n  };\r\n\r\n  let history = useHistory();\r\n  const [carList, setCarList] = useState([\r\n    {\r\n      id: 1,\r\n      carBrand: \"Kia\",\r\n      carType: \"1\",\r\n      image: \"img1\",\r\n      plateNumber: \"SLB1231\",\r\n      Deposit: \"S$10\",\r\n      Rental: \"2S$\",\r\n      Availability: 0,\r\n      Description: \"Mass-Market Cars\",\r\n    },\r\n    {\r\n      id: 2,\r\n      carBrand: \"Chang AN X7\",\r\n      carType: \"2\",\r\n      image: \"img2\",\r\n      plateNumber: \"SLB121\",\r\n      Deposit: \"S$5\",\r\n      Rental: \"3S$\",\r\n      Availability: 1,\r\n      Description: \"Mass-Market Cars\",\r\n    },\r\n    {\r\n      id: 3,\r\n      carBrand: \"Tesla\",\r\n      carType: \"3\",\r\n      image: \"img3\",\r\n      plateNumber: \"SZB1431\",\r\n      Deposit: \"S$6\",\r\n      Rental: \"4S$\",\r\n      Availability: 0,\r\n      Description: \"Luxury Electric Vehicles\",\r\n    },\r\n    {\r\n      id: 4,\r\n      carBrand: \"Suzuki--x\",\r\n      carType: \"4\",\r\n      image: \"img4\",\r\n      plateNumber: \"SDB3431\",\r\n      Deposit: \"S$4\",\r\n      Rental: \"6S$\",\r\n      Availability: 1,\r\n      Description: \"Mass-Market Cars\",\r\n    },\r\n    {\r\n      id: 5,\r\n      carBrand: \"Suzuki xx\",\r\n      carType: \"4\",\r\n      image: \"img5\",\r\n      plateNumber: \"SXB4431\",\r\n      Deposit: \"S$10\",\r\n      Rental: \"1S$\",\r\n      Availability: 0,\r\n      Description: \"Mass-Market Cars\",\r\n    },\r\n    {\r\n      id: 6,\r\n      carBrand: \"Hyundai\",\r\n      carType: \"4\",\r\n      image: \"img6\",\r\n      plateNumber: \"SXB4431\",\r\n      Deposit: \"S$10\",\r\n      Rental: \"1S$\",\r\n      Availability: 1,\r\n      Description: \"Small Cars\",\r\n    },\r\n  ]);\r\n\r\n  const logOut = () => {\r\n    localStorage.setItem(\"Token\", \"\");\r\n    localStorage.setItem(\"username\", \"\");\r\n    window.dispatchEvent(new Event(\"storage\"));\r\n    history.push(\"/\");\r\n  };\r\n\r\n  const [visible, setVisible] = useState(false);\r\n  const [confirmLoading, setConfirmLoading] = useState(false);\r\n\r\n  const showModal = () => {\r\n    setVisible(true);\r\n  };\r\n\r\n  const handleOk = () => {\r\n    setConfirmLoading(true);\r\n    setTimeout(() => {\r\n      setVisible(false);\r\n      setConfirmLoading(false);\r\n    }, 2000);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    console.log('Clicked cancel button');\r\n    setVisible(false);\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"searchCar\">\r\n      <div className=\"professorNav\">\r\n        <span className=\"logOut\" onClick={logOut}>\r\n          Log out\r\n        </span>\r\n        <span\r\n          className=\"returnDashboard\"\r\n          onClick={() => history.push(\"/dashboard\")}\r\n        >\r\n          Dashboard\r\n        </span>\r\n      </div>\r\n      {userType == \"admin\" ? (\r\n        <>\r\n        <Button\r\n          type=\"primary\"\r\n          style={{ display: \"block\", margin: \"20px auto 0 auto\" }}\r\n          onClick={showModal}\r\n        >\r\n          Add New Car\r\n        </Button>\r\n        <Modal\r\n        title=\"Add A New Car\"\r\n        visible={visible}\r\n        onOk={handleOk}\r\n        confirmLoading={confirmLoading}\r\n        onCancel={handleCancel}\r\n      >\r\n      <Rent_form \r\n      // {...props.location.state} setForm={(form)=>{Form=form}}\r\n      //                setAddress={(addr)=>{wallet_address=addr}}\r\n      //                setDate = {(date)=>{from_to_end=date}}               \r\n              />\r\n      </Modal>\r\n      </>\r\n      ) : (\r\n        <div></div>\r\n      )}\r\n      <ul className=\"carList\">\r\n        {carList.map((car) => {\r\n          return <CarEntryCard {...car} />;\r\n        })}\r\n      </ul>\r\n      <div></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfList;\r\n"]},"metadata":{},"sourceType":"module"}